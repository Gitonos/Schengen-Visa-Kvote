<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schengen Visum Kvoteberegner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --body-gradient-start: #ff0000;
            --body-gradient-end: #800080;
            --panel-gradient-start: rgba(255, 255, 255, 0.2);
            --panel-gradient-end: rgba(255, 255, 255, 0.4);
            --line-color-1: #ff0000;
            --line-color-2: #00ff00;
        }

        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--body-gradient-start), var(--body-gradient-end));
            background-size: 200% 200%;
            animation: body-gradient-animate 20s ease-in-out infinite;
        }

        @keyframes body-gradient-animate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes abstract-lines {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(100px, 100px) rotate(360deg); }
        }
        
        .abstract-background::before,
        .abstract-background::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.5;
            background-size: 50px 50px;
            animation: abstract-lines 40s linear infinite alternate;
        }
        .abstract-background::before {
            background-image: linear-gradient(to right, var(--line-color-1) 1px, transparent 1px), 
                              linear-gradient(to bottom, var(--line-color-2) 1px, transparent 1px);
        }
        .abstract-background::after {
            background-image: linear-gradient(135deg, transparent 49%, var(--line-color-1) 49%, var(--line-color-1) 51%, transparent 51%),
                              linear-gradient(45deg, transparent 49%, var(--line-color-2) 49%, var(--line-color-2) 51%, transparent 51%);
            animation: abstract-lines 50s linear infinite reverse;
        }

        @keyframes panel-gradient-animate {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 100%; }
        }
        
        .panel-animate {
            background-image: linear-gradient(135deg, var(--panel-gradient-start), var(--panel-gradient-end));
            background-size: 200% 200%;
            animation: panel-gradient-animate 15s ease-in-out infinite alternate;
        }

        @keyframes bubble {
            0% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(100, 220, 100, 0.7);
            }
            70% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(100, 220, 100, 0);
            }
            100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(100, 220, 100, 0);
            }
        }

        .animate-bubble-effect {
            animation: bubble 2s infinite;
        }

        .transition-all-slow {
            transition: all 0.7s ease-in-out;
        }

        input:focus, select:focus {
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.5);
            outline: none;
        }

        .responsive-panel {
            width: 95%;
            padding: 1rem;
            max-width: 500px;
        }
        
        @media (min-width: 640px) {
            .responsive-panel {
                width: 75%;
                padding: 1.5rem;
            }
        }

        @media (min-width: 1024px) {
            .responsive-panel {
                width: 50%;
                padding: 2rem;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    
    <div class="abstract-background"></div>

    <div class="rounded-xl shadow-lg relative z-10 panel-animate responsive-panel">
        <h1 class="text-3xl font-bold text-black mb-2 text-center">Schengen Kvote Barometer</h1>
        <p class="text-sm text-black mb-6 text-center">Beregne visumkvoten din og visualiser reisedagene dine.</p>

        <div class="grid grid-cols-1 gap-4 mb-6">
            <div>
                <label for="originCountry" class="block text-sm font-medium text-black mb-1">Opprinnelsesland (visum)</label>
                <select id="originCountry" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border transition-all-slow">
                </select>
            </div>
            <div>
                <label for="visaQuota" class="block text-sm font-medium text-black mb-1">Visumkvote (dager)</label>
                <select id="visaQuota" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border transition-all-slow">
                    <option value="90">90 dager</option>
                    <option value="30">30 dager</option>
                    <option value="60">60 dager</option>
                    <option value="120">120 dager</option>
                    <option value="180">180 dager</option>
                </select>
            </div>
            <div>
                <label for="entryDate" class="block text-sm font-medium text-black mb-1">Innreisedato</label>
                <input type="date" id="entryDate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border transition-all-slow">
            </div>
            <div>
                <label for="exitDate" class="block text-sm font-medium text-black mb-1">Hjemreisedato</label>
                <input type="date" id="exitDate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border transition-all-slow">
            </div>
        </div>
        
        <div class="mb-6">
            <label for="country" class="block text-sm font-medium text-black mb-1">Velg et Schengen-land</label>
            <select id="country" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border transition-all-slow">
            </select>
        </div>

        <button id="calculateBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200 animate-bubble-effect">
            Beregn dager
        </button>

        <div id="results" class="mt-6 hidden">
            <div id="message" class="mb-4 p-3 rounded-lg text-center font-medium transition-all-slow"></div>

            <div class="grid grid-cols-1 gap-4 text-center">
                <div>
                    <p class="text-xs text-black">Dager brukt</p>
                    <p id="daysUsed" class="text-3xl font-bold text-black transition-all-slow"></p>
                </div>
                <div>
                    <p class="text-xs text-black">Dager igjen</p>
                    <p id="daysRemaining" class="text-3xl font-bold text-black transition-all-slow"></p>
                </div>
                <div>
                    <p class="text-xs text-black">Syklus per uke</p>
                    <p id="weeklyCycle" class="text-3xl font-bold text-black transition-all-slow"></p>
                </div>
            </div>

            <div class="mt-6">
                <p class="text-sm font-medium text-black mb-2">Visuell kvote</p>
                <div class="w-full bg-gray-200 rounded-full h-4 relative">
                    <div id="quotaBar" class="h-4 bg-green-500 rounded-full transition-all-slow" style="width: 0%;"></div>
                    <span id="quotaPercentage" class="absolute top-0 right-2 text-xs font-bold text-black leading-4 transition-all-slow">0%</span>
                </div>
            </div>

            <div class="mt-6">
                <p class="text-sm font-medium text-black mb-2">Reisetidslinje</p>
                <div id="timelineContainer" class="w-full h-8 bg-gray-200 rounded-full flex items-center p-1 relative">
                    <div id="timelineSegment" class="bg-green-500 rounded-full h-6 transition-all-slow"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const entryDateInput = document.getElementById('entryDate');
            const exitDateInput = document.getElementById('exitDate');
            const countrySelect = document.getElementById('country');
            const originCountrySelect = document.getElementById('originCountry'); 
            const visaQuotaSelect = document.getElementById('visaQuota');
            const calculateBtn = document.getElementById('calculateBtn');
            const resultsDiv = document.getElementById('results');
            const messageDiv = document.getElementById('message');
            const daysUsedSpan = document.getElementById('daysUsed');
            const daysRemainingSpan = document.getElementById('daysRemaining');
            const weeklyCycleSpan = document.getElementById('weeklyCycle');
            const quotaBar = document.getElementById('quotaBar');
            const quotaPercentage = document.getElementById('quotaPercentage');
            const timelineSegment = document.getElementById('timelineSegment');

            const schengenCountries = [
                'Østerrike', 'Belgia', 'Kroatia', 'Tsjekkia', 'Danmark', 'Estland', 'Finland', 'Frankrike', 'Tyskland',
                'Hellas', 'Ungarn', 'Island', 'Italia', 'Latvia', 'Liechtenstein', 'Litauen', 'Luxembourg',
                'Malta', 'Nederland', 'Norge', 'Polen', 'Portugal', 'Slovakia', 'Slovenia', 'Spania',
                'Sverige', 'Sveits'
            ];
            
            schengenCountries.forEach(country => {
                const option1 = document.createElement('option');
                option1.value = country;
                option1.textContent = country;
                countrySelect.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = country;
                option2.textContent = country;
                originCountrySelect.appendChild(option2);
            });

            calculateBtn.addEventListener('click', () => {
                const entryDate = new Date(entryDateInput.value);
                const exitDate = new Date(exitDateInput.value);
                const totalDays = parseInt(visaQuotaSelect.value, 10);

                if (isNaN(entryDate.getTime()) || isNaN(exitDate.getTime())) {
                    showMessage("Vennligst fyll ut begge datoene.", "bg-red-100 text-red-700");
                    return;
                }

                if (exitDate <= entryDate) {
                    showMessage("Hjemreisedato må være etter innreisedato.", "bg-red-100 text-red-700");
                    return;
                }

                resultsDiv.classList.remove('hidden');

                const oneDay = 1000 * 60 * 60 * 24;
                const timeDifference = exitDate.getTime() - entryDate.getTime();
                const daysUsed = Math.ceil(timeDifference / oneDay);
                const daysRemaining = totalDays - daysUsed;
                
                const quotaPercentageValue = (daysUsed / totalDays) * 100;
                const weeklyCycle = (daysUsed / totalDays) * 7;

                daysUsedSpan.textContent = daysUsed;
                daysRemainingSpan.textContent = daysRemaining < 0 ? 0 : daysRemaining;
                weeklyCycleSpan.textContent = weeklyCycle.toFixed(2);

                quotaBar.style.width = `${Math.min(100, quotaPercentageValue)}%`;
                quotaPercentage.textContent = `${Math.min(100, quotaPercentageValue).toFixed(0)}%`;
                
                if (quotaPercentageValue > 90) {
                    quotaBar.classList.remove('bg-green-500', 'bg-yellow-500');
                    quotaBar.classList.add('bg-red-500');
                } else if (quotaPercentageValue > 70) {
                    quotaBar.classList.remove('bg-green-500', 'bg-red-500');
                    quotaBar.classList.add('bg-yellow-500');
                } else {
                    quotaBar.classList.remove('bg-yellow-500', 'bg-red-500');
                    quotaBar.classList.add('bg-green-500');
                }

                timelineSegment.style.width = `${Math.min(100, quotaPercentageValue)}%`;
                
                showMessage("Beregning fullført.", "bg-green-100 text-green-700");
            });

            function showMessage(text, classes) {
                messageDiv.textContent = text;
                messageDiv.className = `mb-4 p-3 rounded-lg text-center font-medium ${classes}`;
            }

            function getRandomColor() {
                const colors = ['#FF0000', '#00FF00', '#0000FF', '#8A2BE2', '#FFFF00', '#FFA500', '#556B2F'];
                return colors[Math.floor(Math.random() * colors.length)];
            }

            function updateRandomAnimations() {
                const bodyGradientStart = getRandomColor();
                const bodyGradientEnd = getRandomColor();
                const line1Color = getRandomColor();
                const line2Color = getRandomColor();

                document.documentElement.style.setProperty('--body-gradient-start', bodyGradientStart);
                document.documentElement.style.setProperty('--body-gradient-end', bodyGradientEnd);
                document.documentElement.style.setProperty('--line-color-1', line1Color);
                document.documentElement.style.setProperty('--line-color-2', line2Color);

                const panelGradientStart = `rgba(${parseInt(getRandomColor().slice(1, 3), 16)}, ${parseInt(getRandomColor().slice(3, 5), 16)}, ${parseInt(getRandomColor().slice(5, 7), 16)}, 0.2)`;
                const panelGradientEnd = `rgba(${parseInt(getRandomColor().slice(1, 3), 16)}, ${parseInt(getRandomColor().slice(3, 5), 16)}, ${parseInt(getRandomColor().slice(5, 7), 16)}, 0.4)`;
                
                document.documentElement.style.setProperty('--panel-gradient-start', panelGradientStart);
                document.documentElement.style.setProperty('--panel-gradient-end', panelGradientEnd);
            }

            updateRandomAnimations();
            setInterval(updateRandomAnimations, 3000); 
        });
    </script>
</body>
</html>




